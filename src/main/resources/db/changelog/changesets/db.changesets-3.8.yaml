databaseChangeLog:
  - changeSet:
      id: 3.3-add-edit-user-firm-permissions
      author: system
      changes:
        # Add EDIT_USER_FIRM permission to External User Admin role
        - sql:
            dbms: postgresql
            sql: "INSERT INTO role_permission (app_role_id, permission) VALUES ((SELECT id FROM app_role WHERE name = 'External User Admin'), 'EDIT_USER_FIRM')"
        # Add EDIT_USER_FIRM permission to Global Admin role
        - sql:
            dbms: postgresql
            sql: "INSERT INTO role_permission (app_role_id, permission) VALUES ((SELECT id FROM app_role WHERE name = 'Global Admin'), 'EDIT_USER_FIRM')"
      rollback:
        - sql:
            dbms: postgresql
            sql: "DELETE FROM role_permission WHERE app_role_id = (SELECT id FROM app_role WHERE name = 'External User Admin') AND permission = 'EDIT_USER_FIRM'"
        - sql:
            dbms: postgresql
            sql: "DELETE FROM role_permission WHERE app_role_id = (SELECT id FROM app_role WHERE name = 'Global Admin') AND permission = 'EDIT_USER_FIRM'"
