databaseChangeLog:
  - changeSet:
      id: 1761063088678-1
      author: niall.mcmahon
      context: playwright
      changes:
        # Global Admin
        - sql:
            dbms: postgresql
            sql: "INSERT INTO entra_user  (id,email, first_name, last_name, entra_oid, status, multi_firm_user, created_by, last_modified_by, created_date, last_modified_date) VALUES (gen_random_uuid(), 'playwright-globaladmin@playwrighttest.com','Playwright', 'GlobalAdmin', gen_random_uuid(), 'ACTIVE', false, 'System', 'System', NOW(), NOW())"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile (id, entra_user_id, active_profile, status, user_type, created_date, last_modified_date, created_by, last_modified_by, last_sync_successful) VALUES (gen_random_uuid(), (SELECT id FROM entra_user WHERE email = 'playwright-globaladmin@playwrighttest.com'), true, 'COMPLETE', 'INTERNAL', NOW(), NOW(), 'System', 'System', false)"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile_app_role(user_profile_id, app_role_id) VALUES ((SELECT up.id FROM user_profile up JOIN entra_user u ON up.entra_user_id = u.id WHERE u.email = 'playwright-globaladmin@playwrighttest.com'), (SELECT id FROM app_role where name = 'Global Admin'))"

  # User with No Roles
  - changeSet:
      id: 1761063088678-2
      author: chris.marron
      context: playwright
      changes:
        - sql:
            dbms: postgresql
            sql: "INSERT INTO entra_user (id, email, first_name, last_name, entra_oid, status, multi_firm_user, created_by, last_modified_by, created_date, last_modified_date) VALUES (gen_random_uuid(), 'playwright-noroles@playwrighttest.com','Playwright', 'NoRoles', gen_random_uuid(), 'ACTIVE', false, 'System', 'System', NOW(), NOW())"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile (id, entra_user_id, active_profile, status, user_type, created_date, last_modified_date, created_by, last_modified_by, last_sync_successful) VALUES (gen_random_uuid(), (SELECT id FROM entra_user WHERE email = 'playwright-noroles@playwrighttest.com'), true, 'COMPLETE', 'INTERNAL', NOW(), NOW(), 'System', 'System', false)"

  # Internal User Viewer
  - changeSet:
      id: 1761063088678-4
      author: chris.marron
      context: playwright
      changes:
        - sql:
            dbms: postgresql
            sql: "INSERT INTO entra_user (id, email, first_name, last_name, entra_oid, status, multi_firm_user, created_by, last_modified_by, created_date, last_modified_date)
                   VALUES (gen_random_uuid(), 'playwright-internaluserviewer@playwrighttest.com', 'Playwright', 'InternalUserViewer', gen_random_uuid(), 'ACTIVE', false, 'System', 'System', NOW(), NOW())"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile (id, entra_user_id, active_profile, status, user_type, created_date, last_modified_date, created_by, last_modified_by, last_sync_successful)
                   VALUES (gen_random_uuid(), (SELECT id FROM entra_user WHERE email = 'playwright-internaluserviewer@playwrighttest.com'),
                   true, 'COMPLETE', 'INTERNAL', NOW(), NOW(), 'System', 'System', false)"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile_app_role (user_profile_id, app_role_id)
                   VALUES ((SELECT up.id FROM user_profile up JOIN entra_user u ON up.entra_user_id = u.id
                            WHERE u.email = 'playwright-internaluserviewer@playwrighttest.com'),
                           (SELECT id FROM app_role WHERE name = 'Internal User Viewer'))"

  # Internal User Manager
  - changeSet:
      id: 1761063088678-5
      author: chris.marron
      context: playwright
      changes:
        - sql:
            dbms: postgresql
            sql: "INSERT INTO entra_user (id, email, first_name, last_name, entra_oid, status, multi_firm_user, created_by, last_modified_by, created_date, last_modified_date)
                   VALUES (gen_random_uuid(), 'playwright-internalusermanager@playwrighttest.com', 'Playwright', 'InternalUserManager', gen_random_uuid(), 'ACTIVE', false, 'System', 'System', NOW(), NOW())"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile (id, entra_user_id, active_profile, status, user_type, created_date, last_modified_date, created_by, last_modified_by, last_sync_successful)
                   VALUES (gen_random_uuid(), (SELECT id FROM entra_user WHERE email = 'playwright-internalusermanager@playwrighttest.com'),
                   true, 'COMPLETE', 'INTERNAL', NOW(), NOW(), 'System', 'System', false)"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile_app_role (user_profile_id, app_role_id)
                   VALUES ((SELECT up.id FROM user_profile up JOIN entra_user u ON up.entra_user_id = u.id
                            WHERE u.email = 'playwright-internalusermanager@playwrighttest.com'),
                           (SELECT id FROM app_role WHERE name = 'Internal User Manager'))"
  # External User Manager
  - changeSet:
      id: 1761063088678-7
      author: chris.marron
      context: playwright
      changes:
        - sql:
            dbms: postgresql
            sql: "INSERT INTO entra_user (id, email, first_name, last_name, entra_oid, status, multi_firm_user, created_by, last_modified_by, created_date, last_modified_date)
                  VALUES (gen_random_uuid(), 'playwright-externalusermanager@playwrighttest.com', 'Playwright', 'ExternalUserManager', gen_random_uuid(), 'ACTIVE', false, 'System', 'System', NOW(), NOW())"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile (id, entra_user_id, active_profile, status, user_type, created_date, last_modified_date, created_by, last_modified_by, last_sync_successful)
                  VALUES (gen_random_uuid(), (SELECT id FROM entra_user WHERE email = 'playwright-externalusermanager@playwrighttest.com'),
                  true, 'COMPLETE', 'INTERNAL', NOW(), NOW(), 'System', 'System', false)"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile_app_role (user_profile_id, app_role_id)
                  VALUES ((SELECT up.id FROM user_profile up JOIN entra_user u ON up.entra_user_id = u.id
                           WHERE u.email = 'playwright-externalusermanager@playwrighttest.com'),
                          (SELECT id FROM app_role WHERE name = 'External User Manager'))"

  # External User Admin
  - changeSet:
      id: 1761063088678-8
      author: chris.marron
      context: playwright
      changes:
        - sql:
            dbms: postgresql
            sql: "INSERT INTO entra_user (id, email, first_name, last_name, entra_oid, status, multi_firm_user, created_by, last_modified_by, created_date, last_modified_date)
                  VALUES (gen_random_uuid(), 'playwright-externaluseradmin@playwrighttest.com', 'Playwright', 'ExternalUserAdmin', gen_random_uuid(), 'ACTIVE', false, 'System', 'System', NOW(), NOW())"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile (id, entra_user_id, active_profile, status, user_type, created_date, last_modified_date, created_by, last_modified_by, last_sync_successful)
                  VALUES (gen_random_uuid(), (SELECT id FROM entra_user WHERE email = 'playwright-externaluseradmin@playwrighttest.com'),
                  true, 'COMPLETE', 'INTERNAL', NOW(), NOW(), 'System', 'System', false)"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile_app_role (user_profile_id, app_role_id)
                  VALUES ((SELECT up.id FROM user_profile up JOIN entra_user u ON up.entra_user_id = u.id
                           WHERE u.email = 'playwright-externaluseradmin@playwrighttest.com'),
                          (SELECT id FROM app_role WHERE name = 'External User Admin'))"

  # External User Viewer
  - changeSet:
      id: 1761063088678-6
      author: chris.marron
      context: playwright
      changes:
        - sql:
            dbms: postgresql
            sql: "INSERT INTO entra_user (id, email, first_name, last_name, entra_oid, status, multi_firm_user, created_by, last_modified_by, created_date, last_modified_date)
                  VALUES (gen_random_uuid(), 'playwright-externaluserviewer@playwrighttest.com', 'Playwright', 'ExternalUserViewer', gen_random_uuid(), 'ACTIVE', false, 'System', 'System', NOW(), NOW())"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile (id, entra_user_id, active_profile, status, user_type, created_date, last_modified_date, created_by, last_modified_by, last_sync_successful)
                  VALUES (gen_random_uuid(), (SELECT id FROM entra_user WHERE email = 'playwright-externaluserviewer@playwrighttest.com'),
                  true, 'COMPLETE', 'INTERNAL', NOW(), NOW(), 'System', 'System', false)"
        - sql:
            dbms: postgresql
            sql: "INSERT INTO user_profile_app_role (user_profile_id, app_role_id)
                  VALUES ((SELECT up.id FROM user_profile up JOIN entra_user u ON up.entra_user_id = u.id
                           WHERE u.email = 'playwright-externaluserviewer@playwrighttest.com'),
                          (SELECT id FROM app_role WHERE name = 'External User Viewer'))"


  # Insert Playwright Firms with Offices
  - changeSet:
      id: 1761063088678-10
      author: chris.marron
      context: playwright
      changes:
        - sql:
            dbms: postgresql
            sql: |
              -- Insert Firms
              INSERT INTO firm (id, code, name, type, parent_firm_id) VALUES
              ('11111111-1111-1111-1111-111111111111', '90001', 'Automation Firm One', 'LEGAL_SERVICES_PROVIDER', NULL),
              ('22222222-2222-2222-2222-222222222222', '90002', 'Automation Firm Two', 'LEGAL_SERVICES_PROVIDER', NULL);
              
              -- Insert Offices for Firms
              INSERT INTO office (id, firm_id, post_code, address_line_1, address_line_2, city) VALUES
              ('33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '12345', 'Automation Office 1', '', 'City1'),
              ('44444444-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', '23456', 'Automation Office 2', '', 'City2'),
              ('55555555-5555-5555-5555-555555555555', '22222222-2222-2222-2222-222222222222', '34567', 'Automation Office 1', '', 'City3'),
              ('66666666-6666-6666-6666-666666666666', '22222222-2222-2222-2222-222222222222', '45678', 'Automation Office 2', '', 'City4'),
              ('77777777-7777-7777-7777-777777777777', '22222222-2222-2222-2222-222222222222', '56789', 'Automation Office 3', '', 'City5');
  # External User Viewer
#  - changeSet:
#      id: 1761063088678-30
#      author: chris.marron
#      context: playwright
#      changes:
#        - sql:
#            dbms: postgresql
#            sql: "INSERT INTO app (id, name, description, created_by, last_modified_by, created_date, last_modified_date)"
#                  VALUES (gen_random_uuid(), 'Playwright App', 'Application for Playwright Testing', 'System', 'System', NOW(), NOW())"
#        - sql:
#            dbms: postgresql
#            sql: "INSERT INTO app_role(id, app_id, name, description, created_by, last_modified_by, created_date, last_modified_date)"
#                  VALUES (gen_random_uuid(), (SELECT id FROM app WHERE name = 'Playwright App'), 'External User Viewer', 'Role for External User Viewer in Playwright App', 'System', 'System', NOW(), NOW())"
#        - sql:
#            dbms: postgresql
#            sql: "INSERT INTO user_profile_app_role (user_profile_id, app_role_id)
#                  VALUES ((SELECT up.id FROM user_profile up JOIN entra_user u ON up.entra_user_id = u.id
#                           WHERE u.email = 'playwright-externaluserviewer@playwrighttest.com'),
#                          (SELECT id FROM app_role WHERE name = 'External User Viewer'))"