<!DOCTYPE html>
<html lang="en" th:replace="~{layout :: layout(
      title=~{::title},
      mainContent=~{::#main-content},
      pageCategory=${'home'})}" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Homepage</title>
</head>

<body>
    <main class="govuk-main-wrapper" id="main-content">
        <!-- Success banner for firm switch -->
        <div th:if="${messageType == 'success' and activeFirm != null}" id="firm-switch-success-banner"
            class="govuk-notification-banner govuk-notification-banner--success" role="alert"
            th:attr="aria-labelledby='govuk-notification-banner-title'" data-module="govuk-notification-banner"
            style="position: relative;">
            <div class="govuk-notification-banner__header">
                <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                    Success
                </h2>
            </div>
            <div class="govuk-notification-banner__content"
                style="display: flex; justify-content: space-between; align-items: center;">
                <p class="govuk-notification-banner__heading" style="margin: 0;">
                    You are now working on behalf of <span th:text="${activeFirm.getName()}">Firm Name</span>
                </p>
                <button type="button" class="govuk-link"
                    style="background: none; border: none; cursor: pointer; text-decoration: underline; color: #1d70b8; font-size: 19px; line-height: 1.31579; margin-left: 20px; white-space: nowrap;"
                    onclick="document.getElementById('firm-switch-success-banner').style.display='none';">
                    Dismiss
                </button>
            </div>
        </div>

        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                <h1 class="govuk-heading-xl">Your legal aid services</h1>

                <div th:if="${isAdminUser}" class="govuk-!-margin-bottom-6">
                    <h2 class="govuk-heading-l">Admin services</h2>

                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-full">
                            <div class="moj-ticket-panel__content moj-ticket-panel__content--blue">
                                <h3 class="govuk-heading-m">
                                    <a href="/admin/users" class="govuk-link govuk-link--no-visited-state">Manage
                                        your
                                        users</a>
                                </h3>
                                <p class="govuk-body">Manage user access and permissions</p>
                            </div>
                        </div>
                    </div>
                </div>

                <h2 class="govuk-heading-l">Legal aid services</h2>

                <div th:if="${userHasNoRoles}" class="govuk-grid-row">
                    <div class="govuk-grid-column-full">
                        <div class="govuk-inset-text">
                            <p>Your account has been activated.</p>
                            <p th:if="${isInternalUser}">You cannot currently access any services. Contact
                                the
                                MOJ Service Desk to request access.</p>
                            <p th:unless="${isInternalUser}">You cannot currently access any services. Contact your
                                Provider Admin to request access.</p>
                        </div>
                    </div>
                </div>

                <div th:unless="${userHasNoRoles}">
                    <div th:each="app : ${laaApplications}">
                        <div class="govuk-grid-row">
                            <div class="govuk-grid-column-full">
                                <div class="moj-ticket-panel__content moj-ticket-panel__content--blue">
                                    <h3 class="govuk-heading-m">
                                        <a th:href="${app.getUrl()}" class="govuk-link govuk-link--no-visited-state"
                                            rel="noreferrer noopener" target="_blank"
                                            th:text="${app.getTitle() + ' (opens in a new tab)'}"></a>
                                    </h3>
                                    <p class="govuk-body" th:text="${app.getDescription()}"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    </div>
</body>

</html>